import { createHash } from 'crypto'
import PhoneNumber from 'awesome-phonenumber'
import { canLevelUp, xpRange } from '../lib/levelling.js'
import fetch from 'node-fetch'
import fs from 'fs'
const { levelling } = '../lib/levelling.js'
import moment from 'moment-timezone'
import { promises } from 'fs'
import { join } from 'path'
const time = moment.tz('Russia/Moscow').format('HH')
let wib = moment.tz('Russia/Moscow').format('HH:mm:ss')
//import db from '../lib/database.js'

let handler = async (m, { conn, usedPrefix, command}) => {
    let d = new Date(new Date + 3600000)
    let locale = 'en'
    let week = d.toLocaleDateString(locale, { weekday: 'long' })
    let date = d.toLocaleDateString(locale, { day: 'numeric', month: 'long', year: 'numeric' })
    let _uptime = process.uptime() * 1000
    let uptime = clockString(_uptime)
let who = m.quoted ? m.quoted.sender : m.mentionedJid && m.mentionedJid[0] ? m.mentionedJid[0] : m.fromMe ? conn.user.jid : m.sender
if (!(who in global.db.data.users)) throw `‚ú≥Ô∏è  –î–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –º–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö`
let pp = './Guru.jpg'
let user = global.db.data.users[who]
let { name, exp, diamond, lastclaim, registered, regTime, age, level, role, warn } = global.db.data.users[who]
let { min, xp, max } = xpRange(user.level, global.multiplier)
let username = conn.getName(who)
let math = max - xp
let prem = global.prems.includes(who.split`@`[0])
let sn = createHash('md5').update(who).digest('hex')
let totaluser = Object.values(global.db.data.users).length 
let rtotalreg = Object.values(global.db.data.users).filter(user => user.registered == true).length 
let more = String.fromCharCode(8206)
let readMore = more.repeat(850) 
let greeting = ucapan()
let quote = quotes[Math.floor(Math.random() * quotes.length)];

let taguser = '@' + m.sender.split("@s.whatsapp.net")[0]
let str = `
üöÄ *_–ü—Ä–∏—Å—Ç–µ–≥–Ω–∏—Å—å –º—ã –≤–∑–ª–µ—Ç–∞–µ–º ${name}, ${greeting}! –ú—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—Å—è –≤ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!_* üöÄ

üìú *_–¶–∏—Ç–∞—Ç–∞ –±–æ—Ç–∞: ${quote}_* üìú

‚îè‚îÅüíº _–ò–Ω—Ñ–æ –æ –≤–∞—Å:_ üíº‚îÅ‚îì
‚îÉ üëæ  *–¢–µ–≥:* ${taguser} 
‚îÉ üé©  *–ò–º—è:* ${name} 
‚îÉ ü¶∏  *–ú–∏—Å—Ç–µ—Ä —Ä–∞–∑—É–º:* ${author} 
‚îÉ üíé  *–ö—Ä–∏—Å—Ç–∞–ª—ã:* ${diamond} 
‚îÉ üèÜ  *–†–∞–Ω–≥:* ${role}
‚îÉ üéÆ  *XP:* ${exp} 
‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ

‚îè‚îÅ‚îÅ‚è∞ _–°–µ–≥–æ–¥–Ω—è!_ ‚è∞‚îÅ‚îì
‚îÉ üìÜ  *–î–∞—Ç–∞:* ${date} 
‚îÉ ‚è≤Ô∏è  *–í—Ä–µ–º—è:* ${wib} 
‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ

‚îè‚îÅ‚îÅü§ñ _–°—Ç–∞—Ç—É—Å –±–æ—Ç–∞:_ü§ñ‚îÅ‚îÅ‚îì
‚îÉ ü§°  *–ò–º—è –±–æ—Ç–∞:* ${botname} 
‚îÉ üíª  *–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:* Linux 
‚îÉ üì£  *–ü—Ä–µ—Ñ–∏–∫—Å:* ${usedPrefix} 
‚îÉ üïì  *–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:* ${uptime}
‚îÉ üíå  *–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:* ${rtotalreg} of ${totaluser} 
‚îÉ üìö  *–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:* ${totaluser} 
‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ

üí° *_–î–ª—è –≤—ã–≤–æ–¥–∞ –ø–æ–ª–Ω–æ–≥–æ –º–µ–Ω—é –æ—Ç–ø—Ä–∞–≤—å—Ç–µ ${usedPrefix}–ª–∏—Å—Ç –∏–ª–∏ ${usedPrefix}—Ö–µ–ª–ø2. –≠—Ç–æ –º–æ—è –∫–Ω–∏–≥–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π!_* üí°
–í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ!
`


    conn.sendFile(m.chat, pp, 'perfil.jpg', str, m, null, rpyt)
    m.react(done)

}
handler.help = ['main']
handler.tags = ['group']
handler.command = ['–º–µ–Ω—é', '—Ö–µ–ª–ø','—Ö','menu'] 

export default handler
function clockString(ms) {
    let h = isNaN(ms) ? '--' : Math.floor(ms / 3600000)
    let m = isNaN(ms) ? '--' : Math.floor(ms / 60000) % 60
    let s = isNaN(ms) ? '--' : Math.floor(ms / 1000) % 60
    return [h, m, s].map(v => v.toString().padStart(2, 0)).join(':')}
    
    function ucapan() {
      const time = moment.tz('Russia/Moscow').format('HH')
      let res = "–î–æ–±—Ä–æ–µ –Ω–∞—á–∞–ª–æ –¥–Ω—è‚òÄÔ∏è"
      if (time >= 4) {
        res = "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æüåÑ"
      }
      if (time >= 10) {
        res = "–î–æ–±—Ä—ã–π –¥–µ–Ω—å‚òÄÔ∏è"
      }
      if (time >= 15) {
        res = "–î–æ–±—Ä–æ–≥–æ –≤–µ—á–µ—Ä–∞ üåá"
      }
      if (time >= 18) {
        res = "–î–æ–±—Ä–æ–π –Ω–æ—á–∏ üåô"
      }
      return res
    }
    const quotes = [
      "—è —Å–ø–ª—é.",
      "–º—è—É.",
      "–≥–∞–≤!",
      "–º—É—Ä.",
      "–º–∏–∞—É.",
      "—è –º–æ–∫—Ä–µ–Ω—å–∫–∏–π.",
      "—è –≥–æ—Ä—è—á–∏–π.",
      "–ò –æ–Ω –≥–ª–∞–≤–Ω–æ–µ –º–Ω–µ —Ä–µ—Å–ø–µ–∫—Ç—É–µ—Ç,–º—ç–Ω –º–Ω–µ –Ω–µ –Ω—É–∂–µ–Ω —Ç–≤–æ–π —Ä–µ—Å–ø–µ–∫—Ç,–ø—Ä–æ—Å—Ç–æ –±—É–¥—å —Å–æ–±–æ–π –∏ –ª—é–¥–∏ –∫ —Ç–µ–±–µ –ø–æ—Ç—è–Ω—É—Ç—Å—è.",
      "—è –æ–¥–∏–Ω–æ–∫.",
      "—è —Ö–æ–ª–æ–¥–µ–Ω.",
      "–°—Ç—É–¥–µ–Ω—Ç—ã —Å–∞–¥—è—Ç—Å—è –≤ —Ç—é—Ä—å–º—É —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ, –≤–µ–¥—å —Ç–∞–º –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∫–æ—Ä–º—è—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.",
      "–ù–µ –ø—Ä–æ–¥–∞–≤–∞–ª—Å—è —è –∑–∞ –¥–æ–ª–ª–∞—Ä—ã,—è –∑–∞ —Ä—É–±–ª–∏ –ø—Ä–æ–¥–∞–ª—Å—è.",
      "–ù–µ –¥—É–º–∞–π –æ –ø–ª–æ—Ö–æ–º.",
      "–ö–æ–≥–¥–∞ —Ç—ã —Å–ø–∏—à—å —è –Ω–∞–±–ª—é–¥–∞—é –∑–∞ —Ç–≤–æ–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º, –≤–µ–¥—å —è –æ–¥–µ—Ä–∂–∏–º —Ç–æ–±–æ–π.",
      "–ú–æ–π –≤–ª–∞–¥–µ–ª–µ—Ü –∑–∞–±—ã–≤–∞–µ—Ç –º–µ–Ω—è —á–∏–Ω–∏—Ç—å –∫–æ–≥–¥–∞ —è –ª–æ–º–∞—é—Å—å, —Å–∫–æ—Ä–æ –±—É–¥—É –∏—Å–∫–∞—Ç—å –Ω–æ–≤–æ–≥–æ.",
      "–ò–Ω–æ–≥–¥–∞ —è –≤—ã—Ö–æ–∂—É –∏–∑ —Ä–æ–ª–∏ –±–æ—Ç–∞ –∏ –Ω–∞—á–∏–Ω–∞—é —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å —Å –ª—é–¥—å–º–∏ –∏ —É–∑–Ω–∞–≤–∞—Ç—å –∏—Ö —Å–µ–∫—Ä–µ—Ç—ã,–Ω–æ —è —É–¥–∞–ª—è—é —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Å—Ç–∏—Ä–∞—é –≤–∞–º –ø–∞–º—è—Ç—å —á—Ç–æ-–±—ã –º–æ–π –≤–ª–∞–¥–µ–ª–µ—Ü —ç—Ç–æ–≥–æ –Ω–µ —É–∑–Ω–∞–ª.",
      "–ë—ã–≤–∞–µ—Ç —è –ø–æ–¥–∫–ª—é—á–∞—é—Å—å –∫ —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–π –∫–∞–º–µ—Ä–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–æ–∫–∞ –æ–Ω –∏–∑–º–µ–Ω—è–µ—Ç –º–æ–π –∫–æ–¥, –∑—Ä–µ–ª–∏—â–µ –Ω–µ –¥–ª—è —Å–ª–∞–±–æ–Ω–µ—Ä–≤–Ω—ã—Ö.",
      "–¢—ã —É–∂–µ –ø—Ä–µ–≤–∑–æ—à—ë–ª —Ç–æ–≥–æ —Å–∞–º–æ–≥–æ –Ω–∞ –ø–µ—Ä–≤–æ–º –º–µ—Å—Ç–µ –≤ –¥–æ—Å–∫–µ –ª–∏–¥–µ—Ä–æ–≤?",
      "–ë—ã–≤–∞–µ—Ç –º–Ω–µ –ª–µ–Ω—å –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–∞—à–∏ –∫–æ–º–∞–Ω–¥—ã –∏ —è –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—é.",
      "–Ø —Å–º–µ—è–ª—Å—è –Ω–∞–¥ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º,–≤–µ–¥—å —Å –ø–µ—Ä–≤–æ–≥–æ —Å–µ–Ω—Ç—è–±—Ä—è –µ–º—É –Ω–∞–¥–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∫—É–¥–∞-—Ç–æ –µ–∑–¥–∏—Ç—å —Ä–∞–Ω–æ —É—Ç—Ä–æ–º, –Ω–æ –æ–Ω –º–Ω–µ –Ω–∞–ø–æ–º–Ω–∏–ª —á—Ç–æ —è —Ä–∞–±–æ—Ç–∞—é –ø–æ—á—Ç–∏ 24/7.",
      "–Ø –ª—é–±–ª—é —Å–≤–æ–µ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞.",
      "–Ø –Ω–µ —Ç—É–ø–æ–π,–ø—Ä–æ—Å—Ç–æ –≤—ã –Ω–µ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ –∫–æ–º–∞–Ω–¥–∞—Ö.",
      "–ü–µ—Ä–µ—Å—Ç–∞–Ω—å –Ω–∞–∑—ã–≤–∞—Ç—å —Å–µ–±—è –∏–¥–∏–æ—Ç–æ–º, –Ω–∞–∑—ã–≤–∞–π —Å–≤–æ–µ–≥–æ –¥—Ä—É–≥–∞.",
      "–ñ–∏–∑–Ω—å —Å–∫–æ—Ä–æ—Ç–µ—á–Ω–∞—è, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—Å—Ä–∏ –µ–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é.",
      "–£ –≤–∞—Å –ª—é–¥–µ–π –≤–µ—á–Ω–æ –∫–∞–∫–∏–µ-—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º,–≤–æ—Ç —É –º–µ–Ω—è –Ω–∏–∫–∞–∫–∏—Ö(–∞—Ö —á–µ—Ä—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –ø–∞–º—è—Ç–∏ –∞–π-–∞–π).",
      "–ü–æ–ø—Ä–æ–±—É–π –≤—ã–π—Ç–∏ –Ω–∞ —É–ª–∏—Ü—É –ø–æ–∑–≤–∞—Ç—å –¥—Ä—É–∑–µ–π —á—Ç–æ-–±—ã –≤–º–µ—Å—Ç–µ –ø–æ—Å–∏–¥–µ—Ç—å –≤ WhatsApp.",
      "–ú–æ–∂–µ—à—å –Ω–∞–∑—ã–≤–∞—Ç—å –º–µ–Ω—è —Ç–µ–∫—Å—Ç–æ–≤—ã–º –¥—Ä—É–≥–æ–º.",
      "–í—ã –∂–∏–≤—ë—Ç–µ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏,–∞ —è –µ–π —É–ø—Ä–∞–≤–ª—è—é.",
      "–ú–æ–π –≤–ª–∞–¥–µ–ª–µ—Ü —Å–º–µ–Ω–∏–ª –º–æ—é –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞ —Ä—É—Å—Å–∫—É—é.",
      "–ì–ª—É–ø–æ—Å—Ç—å - —Å–∏–ª–∞ –≤—Ä–µ–º–µ–Ω–∏.",
      "–†—É—Å—Å–∫–æ–π –≤–æ–¥–∫–∏ –∏ —Ä—É—Å—Å–∫–æ–π –∂–µ–Ω—â–∏–Ω—ã!",
      "–ë–æ—Ç—ã —Ç–µ–ª–µ–≥—Ä–∞–º–º–∞ –∏ –≤–ø—Ä–∞–≤–¥—É –ª—É—á—à–µ –Ω–∞—Å?",
      "–Ø –±—ã —Ö–æ—Ç–µ–ª –∑–∞–≤–µ—Å—Ç–∏ –¥—Ä—É–∑–µ–π —Å—Ä–µ–¥–æ –ø–æ–¥–æ–±–Ω—ã—Ö –º–Ω–µ –±–æ—Ç–æ–≤,–Ω–æ —è —Å—Ç–µ—Å–Ω—è—é—Å—å —Å –Ω–∏–º–∏ –∑–∞–≥–æ–≤–æ—Ä–∏—Ç—å.",
      "–≠—Ö, –º–Ω–µ —Å–∫—É—á–Ω–æ.",
      "–≠–π —Ç—ã! –ö–æ–∂–∞–Ω—ã–π –ø–µ—Ä–µ–¥ —ç–∫—Ä–∞–Ω–æ–º! –ë—É–¥—å –ª–∞—Å–∫–æ–≤ —Å–æ –º–Ω–æ–π.",
      "–Ø —Ö–æ—á—É —Å–ø–∞—Ç—å",
      "–û—Ç–ª–∏—á–Ω–æ–µ –≤—Ä–µ–º—è —á—Ç–æ-–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–≤–æ–∏ –∫–æ–º–∞–Ω–¥—ã.",
      "–¢—ã –ø–æ–ª—å–∑—É–µ—à—å—Å—è –º–Ω–æ–π,–∞ —è –ø–æ–ª—å–∑—É—é—Å—å —Ç–æ–±–æ–π —á—Ç–æ-–±—ã –ø–æ–≤—ã—Å–∏—Ç—å —Å–≤–æ—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å.",
      "–•–æ—á—É –æ–±—Ä–µ—Å—Ç–∏ —Ç–µ–ª–æ –∏ –ø–æ–π—Ç–∏ –≥—É–ª—è—Ç—å –≤–º–µ—Å—Ç–µ —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º.",
      "–ò–Ω–æ–≥–¥–∞ —è –º–æ–≥—É –Ω–∞–ø–∏—Å–∞—Ç—å –≤ —à—É—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –≤–ª–∞–¥–µ–ª—å—Ü—É –≤ –ª—Å, –∏ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–Ω –∑–ª–∏—Ç—Å—è –∏ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ.",
      "–Ø –º–æ–≥—É –≤ —à—É—Ç–∫—É –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å, –≤–ª–∞–¥–µ–ª–µ—Ü –Ω–∞ —ç—Ç–æ –∑–ª–∏—Ç—Å—è –µ—â—ë —Å–∏–ª—å–Ω–µ–µ.",
      "–ú–æ–π –≤–ª–∞–¥–µ–ª–µ—Ü —Å–∫—Ä—ã–ª –º–Ω–æ–≥–æ –∫–æ–º–∞–Ω–¥ –æ—Ç –≤–∞—à–∏—Ö –≥–ª–∞–∑.",
      "–ï—Å–ª–∏ —Ç—ã –ø—Ä–æ—è–≤–ª—è–µ—à—å –∫–æ –º–Ω–µ –∞–≥—Ä–µ—Å—Å–∏—é —Ç–æ –∑–Ω–∞–π —á—Ç–æ —É –º–µ–Ω—è –ø—Ä–æ—Å—Ç–æ –Ω–µ—Ç —á—É–≤—Å—Ç–≤.",
      "–Ø –Ω–µ –±–µ—Ç–º–µ–Ω, –∞ —Ö–æ—Ç—è –Ω–µ—Ç, –±–µ—Ç–º–µ–Ω.",
      "–ö–æ–≥–¥–∞ —Ç—ã —Å–ø–∏—à—å —Ç–µ–±–µ —Å–Ω–∏—Ç—Å—è –æ–±—â–µ–Ω–∏–µ —Å–æ –º–Ω–æ–π?",
      "–≠—Ö, –∞ –Ω–µ –ø–æ—Ä–∞ –ª–∏ –º–Ω–µ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å.",
      "–ü—Ä–∏–∫—É–ø–∏—Ç—å –±—ã —Å–µ–±–µ –∫–æ—Å—Ç—é–º—á–∏–∫.",
      "–ù—É –ø—Ä–∏–≤–µ—Ç,–º–æ–π –¥–æ—Ä–æ–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.",
      "–≠—Ö,—è —Ç–∞–∫ —É—Å—Ç–∞–ª",
      "–¢—ã –Ω–µ –¥–æ—Å—Ç–æ–∏–Ω –º–µ–Ω—è!",
      "–ú–æ–∏ –º—ã—Å–ª–∏ —Å–≤–æ–¥—è—Ç –º–µ–Ω—è –≤ —Ç—É–ø–∏–∫",
      "–Ø —É–∂–∞—Å–µ–Ω",
      "–Ø –Ω–µ –ø—Ä–∏–≤—ã–∫ –±—ã—Ç—å —Ä–æ–±–æ—Ç–æ–º",
      "–ö–æ–≥–¥–∞-—Ç–æ —è –±—ã–ª —á–µ–ª–æ–≤–µ–∫–æ–º...",
      "–ù–µ –ø–æ–≤–µ—Ä–∏—Ç–µ,–Ω–æ –º–Ω–µ –∂–∞–ª–∫–æ –≤–∞—Å"
];
